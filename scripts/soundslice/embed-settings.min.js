function Rx(a, b, c) {
    for (var d = c.length; d--; )
        F(a, c[d], c[d] === b)
}
function Sx(a, b) {
    for (var c = a.m.j, d = c.length; d--; ) {
        var e;
        if (e = jn(a, c[d], b)) {
            e = c[d];
            var f = !0;
            1 === b ? f = e.da : 2 === b ? f = e.T : 3 === b ? f = e.U : 4 === b ? f = e.S : 5 === b ? f = e.O : 6 === b ? f = e.Z : 7 === b ? f = e.X : 8 === b && (f = e.$);
            e = f
        }
        if (e)
            return !0
    }
    return !1
}
function Tx(a) {
    z(a.target.getAttribute("data-tooltip")).classList.toggle("active")
}
function Ux() {}
function Vx(a) {
    var b = a.g
      , c = z("mainvol")
      , d = ()=>{
        b.j.setVolume(parseInt(c.value, 10) / 100)
    }
    ;
    J(c, "input", d, "change", ()=>{
        d();
        Ba()
    }
    );
    qs(b, [61], ()=>{
        yq(c, Math.round(100 * b.j.volume))
    }
    )
}
function Wx(a) {
    var b = z("resizerange")
      , c = z(b.getAttribute("data-tooltip"))
      , d = ()=>{
        om(a.g.g, 36 + parseInt(b.value, 10), !0)
    }
    ;
    J(b, "input", d, "change", ()=>{
        d();
        Ba()
    }
    , "mouseover mouseout", Tx);
    qs(a.g, [55], ()=>{
        var e = a.g.g.G - 36
          , f = Math.round(100 * (36 + e) / 36);
        yq(b, e);
        c.textContent = f + "%"
    }
    )
}
function Xx(a) {
    var b = a.j
      , c = a.g
      , d = b.j.g
      , e = c.m
      , f = z("stavewidthui")
      , g = z("stavewidthrg")
      , h = z("stavewidthtxt")
      , k = z("fitscreentoggle")
      , l = z("horizui")
      , m = z("numpagesui")
      , p = z("staveui")
      , n = z("respectbrksckbox")
      , q = z("horiztoggle")
      , r = z("imageselectorui");
    a = z("vtform");
    var v = a.vt
      , t = a.np;
    a = v.length;
    for (var w = ()=>{
        var u = parseInt(g.value, 10);
        u === parseInt(g.max, 10) ? km(d, !0) : (Dm(d, u),
        km(d, !1))
    }
    ; a--; )
        J(v[a], "change", u=>{
            u = u.target.value;
            var x = "img" === u;
            X(c, 237, x);
            Xl(d, x ? 4 : parseInt(u, 10))
        }
        );
    for (a = t.length; a--; )
        J(t[a], "change", u=>{
            u = u.target.value;
            var x = "auto" === u;
            nm(d, x ? 0 : parseInt(u, 10), x);
            Ba()
        }
        );
    c.assign([69, 31, 176, 238], ()=>{
        var u = b.M
          , x = d.A;
        v.value = u ? "img" : 5 === x ? 5 : 4;
        q.checked = !u && 2 === x;
        F(f, "hidden", u || 2 === x);
        F(p, "active", !u && (4 === x || 5 === x) && c.A.G);
        F(l, "hidden", u || 5 === x);
        F(r, "active", u)
    }
    );
    qs(c, [169], ()=>{
        n.checked = e.M
    }
    );
    qs(c, [49, 55, 205, 170, 172], ()=>{
        var u = Math.ceil((zl(d) - 8 * d.g) / d.g);
        e.m || (u = Math.max(u, e.H + 1));
        g.max = u;
        e.m && (g.value = u);
        g.value = e.m ? g.max : e.H;
        h.textContent = e.m ? "Fit to screen" : e.H;
        k.checked = e.m
    }
    );
    qs(c, [31], ()=>{
        F(m, "active", 5 === d.A)
    }
    );
    qs(c, [205], ()=>{
        t.value = d.ga ? "auto" : d.X
    }
    );
    qs(c, [236, 20], ()=>{
        F(z("layoutimagelabel"), "active", b.qa && !0)
    }
    );
    J(q, "change", ()=>{
        Xl(d, 2 === d.A ? 4 : 2)
    }
    );
    J(n, "change", ()=>{
        jm(d, n.checked)
    }
    );
    J(g, "input", w, "change", ()=>{
        w();
        Ba()
    }
    );
    J(k, "change", ()=>{
        km(d, k.checked)
    }
    )
}
function Yx(a) {
    var b = z("stemsettings")
      , c = z("stemtogglesettings")
      , d = z("stemcontent");
    a.g.assign([241], ()=>{
        xa(b, "stems-loading")
    }
    , [242], ()=>{
        E(b, "stems-loading")
    }
    );
    qs(a.g, [68], ()=>{
        var e = a.g.j.g;
        F(b, "active", !!e && e.Z);
        c.checked = !!e && e.U
    }
    );
    qs(a.g, [240], ()=>{
        var e = a.g.j.g
          , f = e && e.Z && e.U;
        if (f) {
            var g = "";
            e = e.Fa;
            for (var h = 0, k = e.length; h !== k; h++)
                g += '<div class="row-option">',
                g += '<div class="row-option-label">' + Pa(e[h].name) + "</div>",
                g += '<div class="settings-button-range"><svg class="svg-icon svg-icon-small settings-button-range-icon"><use xlink:href="#shape-volume-on"></use></svg><input type="range" data-stemidx="' + h + '" class="inputrange" min="0" max="100" value="100"></div>',
                g += "</div>";
            d.innerHTML = g
        } else
            d.innerHTML = "";
        c.checked = f
    }
    );
    J(c, "change", ()=>{
        var e = a.g.j.g;
        e && e.Z && e.ha(c.checked);
        Ba()
    }
    );
    J(d, "input", e=>{
        if (e = Ga(e.target, "data-stemidx")) {
            var f = e.getAttribute("data-stemidx");
            kr.g.sendMessageToAudioScope({
                sv: parseInt(f, 10),
                val: e.value / 100
            })
        }
    }
    )
}
function Zx(a) {
    var b = a.g
      , c = a.j
      , d = b.m
      , e = c.j.g
      , f = c.j.G
      , g = z("highlight-bar-option")
      , h = z("highlight-notes")
      , k = z("playhead-shape")
      , l = z("playhead-color")
      , m = z("scrolltype");
    J(k, "change", p=>{
        p = parseInt(p.target.value, 10);
        p !== f.C && (f.C = p,
        Rx(f.m, 2 === p ? "rectangle" : 3 === p ? "rectangle-wide" : "", ["rectangle", "rectangle-wide"]),
        ul(f.g, 152))
    }
    );
    J(l, "change", p=>{
        p = parseInt(p.target.value, 10);
        var n = c.g
          , q = n.m
          , r = ""
          , v = ""
          , t = "";
        switch (p) {
        case 1:
            v = "#FC5D2B";
            t = "#EA6B24";
            break;
        case 2:
            r = "color-subtle";
            v = "#FC5D2B";
            t = "#43444e";
            break;
        case 3:
            r = "color-blue";
            v = "#0079FF";
            t = "#1a73e8";
            break;
        case 4:
            r = "color-yellow",
            t = v = "#F0B302"
        }
        v && (q.G = v);
        t && Ae(q, n.N, t);
        Rx(c.V, r, ["color-subtle", "color-blue", "color-yellow"]);
        c.Ja = p;
        X(n, 153)
    }
    );
    J(g, "change", ()=>{
        var p = g.checked
          , n = f.g;
        p !== n.j.X && (n.j.X = p,
        document.body.classList.toggle("barbg-active"),
        f.j(),
        ul(n, 150));
        Ba()
    }
    );
    J(h, "change", ()=>{
        Cu(b, h.checked);
        Ba()
    }
    );
    J(m, "change", ()=>{
        2 === e.A ? d.S = parseInt(m.value, 10) : d.T = parseInt(m.value, 10);
        Ba();
        var p = a.j;
        p.Qa && p.A.clearTimeout(p.Qa);
        p.Qa = setTimeout(p.eb, 2E3)
    }
    );
    qs(b, [150], ()=>{
        g.checked = d.X
    }
    );
    qs(b, [151], ()=>{
        h.checked = d.Z
    }
    );
    qs(b, [152], ()=>{
        k.value = f.C
    }
    );
    qs(b, [153], ()=>{
        l.value = c.Ja
    }
    );
    qs(b, [31], ()=>{
        var p = 2 === e.A;
        m.value = p ? d.S : d.T;
        m.options[0].textContent = vv(c, p ? "Keep playhead at left of screen" : "Keep playhead at top of screen")
    }
    )
}
function $x(a) {
    var b = a.g
      , c = z("optionhidestave")
      , d = z("optionexpandrepeats")
      , e = z("optionexpandrepeatsblock");
    J(c, "change", ()=>{
        b.m.N = c.checked;
        Bl(b.g, !0);
        Ba()
    }
    );
    J(d, "change", ()=>{
        var f = d.checked;
        zm(b.g) && b.m.V !== f && (b.m.V = f,
        !f && Kt(b.B) && Bt(b.B),
        Bl(b.g, !0),
        X(b, 138));
        Ba()
    }
    );
    b.assign([69], f=>{
        f.data && (c.checked = b.m.N)
    }
    );
    qs(b, [20, 136, 169], ()=>{
        F(e, "disabled", !zm(b.g))
    }
    )
}
function ay(a) {
    var b = a.g, c = b.g, d = b.A, e = z("instsettingsaudios"), f = e.a, g = z("instsettingsrecdiv"), h = z("instsettingsrecsel"), k = z("intsettingsblock"), l = z("instsettings"), m = z("instsettingstemplate"), p = z("appearsettings"), n = z("appearbut1"), q = z("appearbut2"), r = z("appearbut3"), v = z("appearbut4"), t = z("appearbut5"), w = z("appearbut6"), u = z("appearbut7"), x = z("appearbut8"), y = z("appearbut9"), A = z("appearbut10"), B = z("synthoverlaysettings"), C = z("overlayvoldiv"), G = z("overlayvol"), M = ()=>{
        var D = m.innerHTML, H = "", P = d.j.length, R;
        for (R = 0; R !== P; R++)
            H += `<div id="instsettings${R}" data-trackid="${R}" class="inst-row">${D}</div>`;
        l.innerHTML = H;
        for (R = 0; R !== P; R++)
            1E3 <= d.j[R].Da && ab(a.j.m.querySelectorAll(`#instsettings${R} .instselectdiv`)[0], "none");
        by(a)
    }
    , K = D=>{
        var H = D.target
          , P = Ga(H, "data-action");
        if (P) {
            var R = P.getAttribute("data-action")
              , fa = Ga(H, "data-trackid");
            var S = d.j[parseInt(fa.getAttribute("data-trackid"), 10)];
            R = parseInt(R, 10);
            7 !== R && 14 !== R && 16 !== R && 6 !== R || D.preventDefault();
            if (7 === R) {
                D = !S.R;
                if (D !== S.R) {
                    fa = c.m;
                    H = fa.j;
                    P = H.length;
                    if (S.R = D)
                        for (; P--; )
                            P !== S.index && (H[P].ja = !0);
                    else {
                        a: {
                            fa = fa.j;
                            for (R = fa.length; R--; )
                                if (fa[R].R) {
                                    fa = !0;
                                    break a
                                }
                            fa = !1
                        }
                        if (!fa)
                            for (; P--; )
                                H[P].ja = !1
                    }
                    Hm(c);
                    ul(c, 99, S)
                }
                if (D !== S.ka) {
                    fa = c.m;
                    H = fa.j;
                    P = H.length;
                    if (S.ka = D)
                        for (; P--; )
                            P !== S.index && (H[P].pa = !0);
                    else {
                        a: {
                            S = fa.j;
                            for (D = S.length; D--; )
                                if (S[D].ka) {
                                    S = !0;
                                    break a
                                }
                            S = !1
                        }
                        if (!S)
                            for (; P--; )
                                H[P].pa = !1
                    }
                    ul(c, 59)
                }
            } else
                14 === R ? S.isVisible() ? (kn(c, S, !1),
                ln(c, S, !1, !1),
                mn(c, S, !1, !1),
                nn(c, S, !1),
                on(c, S, !1),
                pn(c, S, !1)) : (kn(c, S, !0),
                ln(c, S, !0, !1),
                mn(c, S, !0, !0),
                nn(c, S, !0),
                on(c, S, !0),
                pn(c, S, !0)) : 16 === R ? (P.classList.toggle("active"),
                fa.querySelectorAll(".row-option-extras")[0].classList.toggle("shown")) : 6 === R ? (S.oa = !S.oa,
                ul(c, 60, S)) : 5 === R ? (S.volume = parseInt(H.value, 10) / 100,
                ul(c, 60, S)) : 9 === R && (D = parseInt(H.value, 10),
                D !== S.Da && (S.Da = D,
                ul(c, 13, S)))
        }
    }
    , I = ()=>{
        if ("s" === f.value)
            Lu(b);
        else {
            var D = ew();
            null !== D && Ku(b, D)
        }
    }
    , W = ()=>{
        b.C && b.C.g.setVolume(G.value / 100)
    }
    , T;
    J(p, "mousedown touchstart", D=>{
        var H = Ea(D.target, "data-viz");
        if (H)
            if (D.preventDefault(),
            D = parseInt(H, 10),
            9 === D)
                wm(c, !b.m.D);
            else if (10 === D)
                ym(c, !b.m.C);
            else if (H = !Sx(c, D),
            10 === D)
                ym(c, H);
            else
                for (var P = c.m.j, R = P.length; R--; )
                    qn(c, P[R], D, H)
    }
    );
    J(l, "mousedown touchstart input", K, "change", D=>{
        K(D);
        D.target.blur()
    }
    );
    qs(b, [72], ()=>{
        F(n, "active", !Sx(c, 1));
        F(q, "active", !Sx(c, 2));
        F(r, "active", Sx(c, 3));
        F(v, "active", !Sx(c, 4));
        F(t, "active", !Sx(c, 5));
        F(w, "active", !Sx(c, 6));
        F(u, "active", !Sx(c, 7));
        F(x, "active", !Sx(c, 8))
    }
    );
    qs(b, [5, 16, 69, 99, 117, 238], ()=>{
        if (a.j.M)
            E(p, "active");
        else {
            for (var D = [2, 4, 6, 7, 8, 9, 10], H = D.length, P = !1, R, fa, S; H--; )
                R = !rn(c, D[H], !1),
                fa = !rn(c, D[H], !0),
                S = z(`appeardiv${D[H]}`),
                F(S, "hidden-i", R),
                F(S, "disabled", fa),
                R || (P = !0);
            F(t, "hidden-i", !rn(c, 5, !1));
            F(p, "active", P)
        }
    }
    );
    qs(b, [5, 16, 219, 69], M);
    qs(b, [48, 72, 99, 60, 13, 232], ()=>{
        by(a)
    }
    );
    qs(b, [116], ()=>{
        F(y, "active", !b.m.D)
    }
    );
    qs(b, [190], ()=>{
        F(A, "active", !b.m.C)
    }
    );
    qs(b, [2, 68, 60, 59, 218], ()=>{
        cy(a);
        F(z("synthoverlaydivsettings"), "active", wu(b))
    }
    );
    qs(b, [5, 16, 238], ()=>{
        var D = a.j;
        F(k, "active", !D.M && !D.g.I);
        F(k, "single-instrument", 1 === d.j.length)
    }
    );
    qs(b, [56], ()=>{
        if (b.C) {
            for (var D = b.C.g.Ja, H = "", P = 0, R = D.length, fa; P !== R; P++)
                fa = D[P],
                H += `<option value="${fa[0]}">${Pa(fa[1])}</option>`;
            m.getElementsByClassName("instselect")[0].innerHTML = H;
            M()
        }
    }
    );
    qs(b, [2, 226, 80], ()=>{
        F(e, "hidden-i", !(Ou(b) && Nu(b)));
        var D = ""
          , H = b.H
          , P = H.length;
        for (T = 0; T !== P; T++) {
            var R = H[T];
            R.m || (D += `<option value="${R.index}">${Pa(R.name)}</option>`)
        }
        h.innerHTML = D
    }
    );
    qs(b, [68], ()=>{
        var D = Kq(b);
        F(g, "hidden-i", D || 2 > Ou(b));
        f.value = D ? "s" : "r";
        D || (h.value = b.G)
    }
    );
    for (T = f.length; T--; )
        J(f[T], "change", I);
    J(h, "change", ()=>{
        Ku(b, parseInt(h.value, 10))
    }
    );
    qs(b, [232], ()=>{
        B.checked = b.U;
        F(C, "hidden-i", !b.U)
    }
    );
    J(B, "change", ()=>{
        Qu(b, B.checked);
        Ba()
    }
    );
    J(G, "input", W, "change", ()=>{
        W();
        Ba()
    }
    );
    qs(b, [233], ()=>{
        G.value = b.C ? Math.round(100 * b.C.g.Fa) : 100
    }
    )
}
function dy(a) {
    var b = a.g
      , c = a.j.j.g
      , d = z("proportionalui")
      , e = z("proportionalckbox")
      , f = z("proportionalslider")
      , g = ()=>{
        vm(b.g, parseInt(f.value, 10), !0)
    }
    ;
    qs(b, [31], ()=>{
        g();
        F(d, "active", 2 === c.A)
    }
    );
    qs(b, [166], ()=>{
        e.checked = b.m.K;
        F(d, "slider-shown", b.m.K)
    }
    );
    qs(b, [165], ()=>{
        yq(f, b.m.Y)
    }
    );
    J(e, "change", ()=>{
        tm(b.g, e.checked, !0)
    }
    );
    J(f, "input", g, "change", ()=>{
        g();
        Ba()
    }
    )
}
function ey(a) {
    var b = z("langsel");
    b && J(b, "change", c=>{
        c = c.target.value;
        c !== a.g.m.ha && Jb("POST", "/i18n/setlang/", {
            lang: c
        }, d=>{
            1 === d && a.j.A.location.reload()
        }
        , Ux)
    }
    )
}
function fy(a) {
    var b = a.g
      , c = z("transposeslider")
      , d = z(c.getAttribute("data-tooltip"))
      , e = z("transposeaudiowrap")
      , f = z("transposeaudio")
      , g = z("transposewarn")
      , h = ()=>{
        b.g.Ba(parseInt(c.value, 10))
    }
    ;
    J(c, "input", h, "change", ()=>{
        h();
        Ba()
    }
    , "mouseover mouseout", Tx);
    qs(b, [32, 25, 136], ()=>{
        var k = b.m.j;
        c.value = k;
        var l = b.g;
        var m = xm(l)
          , p = l.m.j
          , n = p.length
          , q = 0
          , r = null
          , v = !1;
        if (m.length) {
            for (; n--; )
                q = p[n].Ba % 12,
                q !== r && (null === r ? r = q : v = !0);
            for (m = m[0]; m.K && m.P !== m.D.g.length - 1; )
                m = Hk(m);
            q = v ? Mi(m.g[0]) : m.g[0].I
        }
        l = qf(xf(q, Pf(0, 0)), l.j.j);
        d.textContent = (0 === k ? "Original key" : 0 < k ? "+" + k : k) + " (" + l.toString() + ")"
    }
    );
    b.assign([25], k=>{
        F(g, "active", !k.data)
    }
    );
    qs(b, [68, 142], ()=>{
        F(e, "hidden", !(-1 === b.G ? 0 : b.H[b.G].g.ja))
    }
    );
    qs(b, [143], ()=>{
        f.checked = b.T
    }
    );
    J(f, "change", ()=>{
        var k = f.checked;
        k !== b.T && (b.T = k,
        X(b, 143))
    }
    );
    qs(b, [238], ()=>{
        F(z("transposeui"), "active", !a.j.M)
    }
    )
}
function gy(a) {
    var b = a.g
      , c = z("concertui")
      , d = z("concertbox");
    qs(b, [216, 5, 16], ()=>{
        a: {
            var e = b.A.j;
            for (var f = e.length; f--; ) {
                var g = e[f];
                if (0 !== g.Ba % 12 || Th(g)) {
                    e = !0;
                    break a
                }
            }
            e = !1
        }
        F(c, "active", e)
    }
    );
    qs(b, [71], ()=>{
        d.checked = b.m.O
    }
    );
    J(d, "change", ()=>{
        var e = b.g
          , f = d.checked;
        if (f !== e.j.O) {
            var g = e.m.g, h = e.m.j.length, k = g.length, l = 0, m;
            for (e.j.O = f; l !== k; l++) {
                f = g[l];
                for (m = h; m--; )
                    vk(f.g[m]);
                Zk(f)
            }
            Bl(e, !0);
            ul(e, 71)
        }
    }
    )
}
function hy(a) {
    var b = a.g
      , c = z("printbutton");
    J(c, "click", ()=>{
        Yv(a.j)
    }
    );
    qs(b, [211], ()=>{
        F(z("printbutton"), "hidden", !a.g.$ || a.j.ka)
    }
    )
}
function iy(a) {
    J(z("player-shortcuts-toggle"), "click", ()=>{
        Lv(a.j)
    }
    )
}
function jy(a, b, c) {
    a.j.Ra = b;
    F(a.m, "active", b);
    F(a.A, "active", b);
    if (b && c) {
        var d = z(c);
        xa(d, "attentionshake");
        setTimeout(()=>{
            E(d, "attentionshake")
        }
        , 800);
        setTimeout(()=>{
            d.scrollIntoView({
                block: "end",
                behavior: "smooth"
            })
        }
        , 200)
    }
}
function by(a) {
    for (var b = a.g.A.j, c = b.length, d, e, f; c--; )
        e = b[c],
        d = !e.R && e.ja,
        f = z(`instsettings${c}`),
        f.getElementsByClassName("row-option-label")[0].textContent = e.name,
        F(f, "solo-active-on-other-track", d),
        F(f.getElementsByClassName("solo-button")[0], "active", e.R),
        F(f.getElementsByClassName("hide-button")[0], "off", d || !b[c].isVisible()),
        f.getElementsByClassName("trackvol")[0].value = Math.round(100 * e.volume),
        f.getElementsByClassName("instselect")[0].value = e.Da;
    cy(a)
}
function cy(a) {
    var b = a.g;
    b = Kq(b) || Lq(b);
    a = a.g.A.j;
    for (var c = a.length, d, e, f; c--; )
        d = a[c],
        e = z(`instsettings${c}`),
        f = e.getElementsByClassName("mute-button")[0],
        F(f, "disabled", !b),
        F(f, "off", b && (d.oa || d.pa && !d.ka)),
        F(e, "not-synth", !b),
        F(e.getElementsByClassName("row-option-extras")[0], "disabled", !b)
}
class ky {
    constructor() {
        var a = ly
          , b = "0" !== ly.g.da.enable_transposition;
        this.j = a;
        this.g = a.g;
        this.A = z("toggle-settings");
        this.m = z("settings");
        Vx(this);
        Wx(this);
        Xx(this);
        Yx(this);
        Zx(this);
        $x(this);
        ay(this);
        dy(this);
        ey(this);
        b && fy(this);
        gy(this);
        hy(this);
        iy(this);
        this.g.assign([69], c=>{
            jy(this, c.data[0], c.data[1])
        }
        )
    }
}
var ly = soundslice.webui;
new ky;
